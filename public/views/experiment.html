<!doctype html>
<html>
  <head>
    <title>Reaction times of auditory take over requests</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="jsPsych/jspsych.js"></script>
    <script src="jsPsych/plugins/jspsych-text.js"></script>
    <script src="jsPsych/plugins/jspsych-single-audio.js"></script>
    <link href="jsPsych/css/jspsych.css" rel="stylesheet" type="text/css"></link>
    <link href="css/experiment.css" rel="stylesheet" type="text/css"></link>
    <link rel="icon" type="image/png" href="/img/favicon.png" />
  </head>
  <body>
    <div class = "parent">
      <div class = "child">
        <div id="jspsych_target"></div>
      </div>
    </div>
  </body>
  <script>

  /* define instructions block */
  var instructions_block = {
    type: "text",
    text: "<p>In this experiment, you will hear sounds and see red circles. Please make sure that your audio is on and set your screen to bright. You need to press 'F' after hearing a sound OR seeing a red circle (whichever comes first) as fast as possible. Your reaction times will be recorded. After each group of 25 stimuli you will be able to take a small break. Please press any key to start with the first stimulus.</p>",
    timing_post_trial: 2000
  };

  var post_trial_gap_last = -1;

  var post_trial_gap = function() {
    post_trial = Math.floor( Math.random() * 2300 ) + 1000;
    post_trial_gap_last = post_trial;
    return post_trial;
  }

  /* define test block */
  var test_stimuli = [
    /* red delayed*/
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_red_10ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_red_10_"});
    	jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: getUrlParameter('0')});
        jsPsych.data.addDataToLastTrial({visual_delay: getUrlParameter('10')});
        jsPsych.data.addDataToLastTrial({visual_intensity: getUrlParameter('red')});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_red_20ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_red_20_"});
    	jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: getUrlParameter('0')});
        jsPsych.data.addDataToLastTrial({visual_delay: getUrlParameter('20')});
        jsPsych.data.addDataToLastTrial({visual_intensity: getUrlParameter('red')});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_red_30ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_red_30_"});
    	jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: getUrlParameter('0')});
        jsPsych.data.addDataToLastTrial({visual_delay: getUrlParameter('30')});
        jsPsych.data.addDataToLastTrial({visual_intensity: getUrlParameter('red')});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_red_40ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_red_40_"});
    	jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "40"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "red"});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_red_50ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_red_50_"});
    	jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "50"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "red"});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_red_60ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_red_60_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "60"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "red"});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_red_70ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_red_70_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "70"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "red"});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_red_80ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_red_80_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "80"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "red"});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_red_90ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_red_90_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "90"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "red"});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_red_100ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_red_100_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "100"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "red"});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_red_200ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_red_200_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "200"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "red"});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_red_300ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_red_300_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "300"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "red"});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_red_500ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_red_500_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "500"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "red"});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_red_1000ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_red_1000_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "1000"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "red"});
      }
    },
    /* middle red delayed */
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_middle_10ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_middle_10_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "10"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "middle"});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_middle_20ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_middle_20_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "20"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "middle"});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_middle_30ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_middle_30_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "30"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "middle"});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_middle_40ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_middle_40_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "40"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "middle"});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_middle_50ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_middle_50_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "50"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "middle"});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_middle_60ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_middle_60_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "60"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "middle"});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_middle_70ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_middle_70_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "70"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "middle"});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_middle_80ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_middle_80_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "80"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "middle"});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_middle_90ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_middle_90_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "90"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "middle"});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_middle_100ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_middle_100_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "100"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "middle"});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_middle_200ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_middle_200_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "200"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "middle"});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_middle_300ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_middle_300_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "300"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "middle"});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_middle_500ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_middle_500_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "500"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "middle"});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_middle_1000ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_middle_1000_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "1000"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "middle"});
      }
    },
    /* low red delayed */
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_low_10ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_low_10_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "10"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "low"});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_low_20ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_low_20_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "20"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "low"});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_low_30ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_low_30_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "30"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "low"});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_low_40ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_low_40_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "40"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "low"});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_low_50ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_low_50_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "50"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "low"});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_low_60ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_low_60_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "60"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "low"});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_low_70ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_low_70_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "70"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "low"});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_low_80ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_low_80_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "80"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "low"});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_low_90ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_low_90_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "90"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "low"});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_low_100ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_low_100_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "100"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "low"});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_low_200ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_low_200_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "200"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "low"});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_low_300ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_low_300_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "300"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "low"});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_low_500ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_low_500_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "500"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "low"});
      }
    },
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_low_1000ms.gif" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_low_1000_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "1000"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "low"});
      }
    },
    /* red */
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_red.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_red_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "red"});
      }
    },
    {
      stimulus: 'sounds/beep_10ms.mp3',
      prompt: '<img src="img/circle_red.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_10_red_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "10"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "red"});
      }
    },
    {
      stimulus: 'sounds/beep_20ms.mp3',
      prompt: '<img src="img/circle_red.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_20_red_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "20"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "red"});
      }
    },
    {
      stimulus: 'sounds/beep_30ms.mp3',
      prompt: '<img src="img/circle_red.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_30_red_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "30"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "red"});
      }
    },
    {
      stimulus: 'sounds/beep_40ms.mp3',
      prompt: '<img src="img/circle_red.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_40_red_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "40"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "red"});
      }
    },
    {
      stimulus: 'sounds/beep_50ms.mp3',
      prompt: '<img src="img/circle_red.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_50_red_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "50"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "red"});
      }
    },
    {
      stimulus: 'sounds/beep_60ms.mp3',
      prompt: '<img src="img/circle_red.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_60_red_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "60"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "red"});
      }
    },
    {
      stimulus: 'sounds/beep_70ms.mp3',
      prompt: '<img src="img/circle_red.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_70_red_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "70"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "red"});
      }
    },
    {
      stimulus: 'sounds/beep_80ms.mp3',
      prompt: '<img src="img/circle_red.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_80_red_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "80"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "red"});
      }
    },
    {
      stimulus: 'sounds/beep_90ms.mp3',
      prompt: '<img src="img/circle_red.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_90_red_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "90"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "red"});
      }
    },
    {
      stimulus: 'sounds/beep_100ms.mp3',
      prompt: '<img src="img/circle_red.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_100_red_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "100"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "red"});
      }
    },
    {
      stimulus: 'sounds/beep_200ms.mp3',
      prompt: '<img src="img/circle_red.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_200_red_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "200"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "red"});
      }
    },
    {
      stimulus: 'sounds/beep_300ms.mp3',
      prompt: '<img src="img/circle_red.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_300_red_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "300"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "red"});
      }
    },
    {
      stimulus: 'sounds/beep_500ms.mp3',
      prompt: '<img src="img/circle_red.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_500_red_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "500"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "red"});
      }
    },
    {
      stimulus: 'sounds/beep_1000ms.mp3',
      prompt: '<img src="img/circle_red.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_1000_red_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "1000"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "red"});
      }
    },
    /* middle red */
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_middle.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_middle_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "middle"});
      }
    },
    {
      stimulus: 'sounds/beep_10ms.mp3',
      prompt: '<img src="img/circle_middle.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_10_middle_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "10"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "middle"});
      }
    },
    {
      stimulus: 'sounds/beep_20ms.mp3',
      prompt: '<img src="img/circle_middle.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_20_middle_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "20"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "middle"});
      }
    },
    {
      stimulus: 'sounds/beep_30ms.mp3',
      prompt: '<img src="img/circle_middle.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_30_middle_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "30"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "middle"});
      }
    },
    {
      stimulus: 'sounds/beep_40ms.mp3',
      prompt: '<img src="img/circle_middle.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_40_middle_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "40"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "middle"});
      }
    },
    {
      stimulus: 'sounds/beep_50ms.mp3',
      prompt: '<img src="img/circle_middle.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_50_middle_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "50"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "middle"});
      }
    },
    {
      stimulus: 'sounds/beep_60ms.mp3',
      prompt: '<img src="img/circle_middle.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_60_middle_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "60"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "middle"});
      }
    },
    {
      stimulus: 'sounds/beep_70ms.mp3',
      prompt: '<img src="img/circle_middle.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_70_middle_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "70"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "middle"});
      }
    },
    {
      stimulus: 'sounds/beep_80ms.mp3',
      prompt: '<img src="img/circle_middle.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_80_middle_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "80"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "middle"});
      }
    },
    {
      stimulus: 'sounds/beep_90ms.mp3',
      prompt: '<img src="img/circle_middle.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_90_middle_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "90"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "middle"});
      }
    },
    {
      stimulus: 'sounds/beep_100ms.mp3',
      prompt: '<img src="img/circle_middle.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_100_middle_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "100"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "middle"});
      }
    },
    {
      stimulus: 'sounds/beep_200ms.mp3',
      prompt: '<img src="img/circle_middle.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_200_middle_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "200"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "middle"});
      }
    },
    {
      stimulus: 'sounds/beep_300ms.mp3',
      prompt: '<img src="img/circle_middle.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_300_middle_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "300"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "middle"});
      }
    },
    {
      stimulus: 'sounds/beep_500ms.mp3',
      prompt: '<img src="img/circle_middle.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_500_middle_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "500"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "middle"});
      }
    },
    {
      stimulus: 'sounds/beep_1000ms.mp3',
      prompt: '<img src="img/circle_middle.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_1000_middle_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "1000"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "middle"});
      }
    },
    /* low red */
    {
      stimulus: 'sounds/beep_0ms.mp3',
      prompt: '<img src="img/circle_low.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_low_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "low"});
      }
    },
    {
      stimulus: 'sounds/beep_10ms.mp3',
      prompt: '<img src="img/circle_low.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_10_low_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "10"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "low"});
      }
    },
    {
      stimulus: 'sounds/beep_20ms.mp3',
      prompt: '<img src="img/circle_low.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_20_low_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "20"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "low"});
      }
    },
    {
      stimulus: 'sounds/beep_30ms.mp3',
      prompt: '<img src="img/circle_low.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_30_low_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "30"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "low"});
      }
    },
    {
      stimulus: 'sounds/beep_40ms.mp3',
      prompt: '<img src="img/circle_low.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_40_low_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "40"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "low"});
      }
    },
    {
      stimulus: 'sounds/beep_50ms.mp3',
      prompt: '<img src="img/circle_low.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_50_low_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "50"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "low"});
      }
    },
    {
      stimulus: 'sounds/beep_60ms.mp3',
      prompt: '<img src="img/circle_low.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_60_low_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "60"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "low"});
      }
    },
    {
      stimulus: 'sounds/beep_70ms.mp3',
      prompt: '<img src="img/circle_low.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_70_low_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "70"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "low"});
      }
    },
    {
      stimulus: 'sounds/beep_80ms.mp3',
      prompt: '<img src="img/circle_low.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_80_low_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "80"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "low"});
      }
    },
    {
      stimulus: 'sounds/beep_90ms.mp3',
      prompt: '<img src="img/circle_low.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_90_low_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "90"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "low"});
      }
    },
    {
      stimulus: 'sounds/beep_100ms.mp3',
      prompt: '<img src="img/circle_low.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_100_low_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "100"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "low"});
      }
    },
    {
      stimulus: 'sounds/beep_200ms.mp3',
      prompt: '<img src="img/circle_low.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_200_low_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "200"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "low"});
      }
    },
    {
      stimulus: 'sounds/beep_300ms.mp3',
      prompt: '<img src="img/circle_low.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_300_low_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "300"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "low"});
      }
    },
    {
      stimulus: 'sounds/beep_500ms.mp3',
      prompt: '<img src="img/circle_low.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_500_low_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "500"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "low"});
      }
    },
    {
      stimulus: 'sounds/beep_1000ms.mp3',
      prompt: '<img src="img/circle_low.png" />',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_1000_low_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "1000"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "low"});
      }
    },
    /* no visual */
    {
      stimulus: 'sounds/beep_0ms.mp3',
      on_finish: function(data){
        jsPsych.data.addDataToLastTrial({type: "beep_0_no_"});
        jsPsych.data.addDataToLastTrial({delay_after: post_trial_gap_last});
        jsPsych.data.addDataToLastTrial({worker_code: getUrlParameter('work')});
        jsPsych.data.addDataToLastTrial({auditory_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_delay: "0"});
        jsPsych.data.addDataToLastTrial({visual_intensity: "none"});
      }
    }
  ];

  // var all_trials = jsPsych.randomization.repeat(test_stimuli.slice(0,30), 1);
  var all_trials = jsPsych.randomization.repeat(test_stimuli, 2);

  var audio_block_1 = {
    type: 'single-audio',
    choices: ['F'],
    timing_post_trial: post_trial_gap,
    timeline: all_trials.slice(0,25),
  };
  var audio_block_2 = {
    type: 'single-audio',
    choices: ['F'],
    timing_post_trial: post_trial_gap,
    timeline: all_trials.slice(26,50),
  };
  var audio_block_3 = {
    type: 'single-audio',
    choices: ['F'],
    timing_post_trial: post_trial_gap,
    timeline: all_trials.slice(51,75),
  };
  var audio_block_4 = {
    type: 'single-audio',
    choices: ['F'],
    timing_post_trial: post_trial_gap,
    timeline: all_trials.slice(76,100),
  };
  var audio_block_5 = {
    type: 'single-audio',
    choices: ['F'],
    timing_post_trial: post_trial_gap,
    timeline: all_trials.slice(101,125),
  };
  var audio_block_6 = {
    type: 'single-audio',
    choices: ['F'],
    timing_post_trial: post_trial_gap,
    timeline: all_trials.slice(126,150),
  };
  var audio_block_7 = {
    type: 'single-audio',
    choices: ['F'],
    timing_post_trial: post_trial_gap,
    timeline: all_trials.slice(151),
  };

  var between_block_1 = {
    type: "text",
    cont_key: ['C'],
    text: function() {
      return "<p>You have now completed 25 stimuli out of 176. When ready press 'C' to proceed to the next batch.</p>";
    }
  };

  var between_block_2 = {
    type: "text",
    cont_key: ['C'],
    text: function() {
      return "<p>You have now completed 50 stimuli out of 176. When ready press 'C' to proceed to the next batch.</p>";
    }
  };

  var between_block_3 = {
    type: "text",
    cont_key: ['C'],
    text: function() {
      return "<p>You have now completed 75 stimuli out of 176. When ready press 'C' to proceed to the next batch.</p>";
    }
  };


var between_block_4 = {
    type: "text",
    cont_key: ['C'],
    text: function() {
      return "<p>You have now completed 100 stimuli out of 176. When ready press 'C' to proceed to the next batch.</p>";
    }
  };

  var between_block_5 = {
    type: "text",
    cont_key: ['C'],
    text: function() {
      return "<p>You have now completed 125 stimuli out of 176. When ready press 'C' to proceed to the next batch.</p>";
    }
  };

  var between_block_6 = {
    type: "text",
    cont_key: ['C'],
    text: function() {
      return "<p>You have now completed 150 stimuli out of 176. When ready press 'C' to proceed to the next batch.</p>";
    }
  };

  /* create experiment timeline array */
  var timeline = [];
  timeline.push(instructions_block);
  timeline.push(audio_block_1);
  timeline.push(between_block_1);
  timeline.push(audio_block_2);
  timeline.push(between_block_2);
  timeline.push(audio_block_3);
  timeline.push(between_block_3);
  timeline.push(audio_block_4);
  timeline.push(between_block_4);
  timeline.push(audio_block_5);
  timeline.push(between_block_5);
  timeline.push(audio_block_6);
  timeline.push(between_block_6);
  timeline.push(audio_block_7);

  var getUrlParameter = function getUrlParameter(sParam) {
    var sPageURL = decodeURIComponent(window.location.search.substring(1)),
        sURLVariables = sPageURL.split('&'),
        sParameterName,
        i;
    for (i = 0; i < sURLVariables.length; i++) {
        sParameterName = sURLVariables[i].split('=');
        if (sParameterName[0] === sParam) {
            return sParameterName[1] === undefined ? true : sParameterName[1];
        }
    }
  };

  /* MTurk information */
  var turkInfo = jsPsych.turk.turkInfo();
  if(turkInfo.previewMode && !turkInfo.outsideTurk) {
    worker_id = turkInfo.workerId;
  } else {
    worker_id = String(Date.now());
  }
  timestamp = String(Date.now());

  jsPsych.pluginAPI.preloadImages(['img/circle_red.png', 'img/circle_low.png', 'img/circle_middle.png', 'img/circle_red_10ms.gif', 'img/circle_red_20ms.gif', 'img/circle_red_30ms.gif', 'img/circle_red_40ms.gif', 'img/circle_red_50ms.gif', 'img/circle_red_60ms.gif', 'img/circle_red_70ms.gif', 'img/circle_red_80ms.gif', 'img/circle_red_90ms.gif', 'img/circle_red_100ms.gif', 'img/circle_red_200ms.gif', 'img/circle_red_300ms.gif', 'img/circle_red_500ms.gif', 'img/circle_red_1000ms.gif','img/circle_middle_10ms.gif', 'img/circle_middle_20ms.gif', 'img/circle_middle_30ms.gif', 'img/circle_middle_40ms.gif', 'img/circle_middle_50ms.gif', 'img/circle_middle_60ms.gif', 'img/circle_middle_70ms.gif', 'img/circle_middle_80ms.gif', 'img/circle_middle_90ms.gif', 'img/circle_middle_100ms.gif', 'img/circle_middle_200ms.gif', 'img/circle_middle_300ms.gif', 'img/circle_middle_500ms.gif', 'img/circle_middle_1000ms.gif','img/circle_low_10ms.gif', 'img/circle_low_20ms.gif', 'img/circle_low_30ms.gif', 'img/circle_low_40ms.gif', 'img/circle_low_50ms.gif', 'img/circle_low_60ms.gif', 'img/circle_low_70ms.gif', 'img/circle_low_80ms.gif', 'img/circle_low_90ms.gif', 'img/circle_low_100ms.gif', 'img/circle_low_200ms.gif', 'img/circle_low_300ms.gif', 'img/circle_low_500ms.gif', 'img/circle_low_1000ms.gif'], function(){ preloadAudio(); });

  function preloadAudio () {
      jsPsych.pluginAPI.preloadAudioFiles(['sounds/beep_0ms.mp3', 'sounds/beep_10ms.mp3', 'sounds/beep_20ms.mp3', 'sounds/beep_30ms.mp3', 'sounds/beep_40ms.mp3', 'sounds/beep_50ms.mp3', 'sounds/beep_60ms.mp3', 'sounds/beep_70ms.mp3', 'sounds/beep_80ms.mp3', 'sounds/beep_90ms.mp3', 'sounds/beep_100ms.mp3', 'sounds/beep_200ms.mp3', 'sounds/beep_300ms.mp3', 'sounds/beep_500ms.mp3', 'sounds/beep_1000ms.mp3'], start);
  }

  /* Start the experiment */
    function start(){
      jsPsych.init({
        display_element: $('#jspsych_target'),
        // show_progress_bar: true,
        timeline: timeline,
        on_finish: function() {
          $.ajax({
            type: "POST",
            url: "/experiment-data",
            data: JSON.stringify(jsPsych.data.getData()),
            contentType: "application/json"
          })
          .done(function() {
            window.location.href = "finish?work=" + getUrlParameter('work');
          })
          .fail(function() {
            alert("A problem occurred while writing to the database. Please contact the researcher for more information.")
            window.location.href = "/";
          })
        }
      });
    }

</script>
</html>